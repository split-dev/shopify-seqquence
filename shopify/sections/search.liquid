<div class="search hero js-search-view">
  <div class="container banner__content banner__content--{{ section.settings.desktop_content_position }} page-width">
    <div class="banner__box content-container content-container--full-width-mobile">
      <div class="banner__form" {{ section.shopify_attributes }}>
        {% if section.settings.tutorial_title != blank %}
          <a class="hero__tutorial" href="{{ section.settings.tutorial_url }}">
            <span>{{ section.settings.tutorial_first_word }}</span>
            {{ section.settings.tutorial_title }}
            {% render 'icon-link' %}
          </a>
        {% endif %}

        <form
          action="/pages/search?preventAutoExtend=on"
          type="POST"
          id="aiSearch"
        >
          <div class="banner__field-wrapper">
            <div class="banner__field field">
              <input
                id="GenerateForm--{{ section.id }}"
                type="text"
                name="search"
                class="banner__input field__input color-text-white text-20px-all"
                value=""
                aria-required="true"
                autocorrect="off"
                autocapitalize="off"
                autocomplete="search"
                placeholder="{{ section.settings.form_placeholder | escape }}"
                required
              >
              <span class="banner__icon-search">{% render 'icon-magic2' %}</span>
              {% comment %}
                <label class="banner__label field__label color-text-white text-20px font-weight-bold">
                  {{ section.settings.form_placeholder | escape }}
                </label>
              {% endcomment %}

              <button
                type="submit"
                class="btn btn--primary banner__button field__button"
                id="SearchSubmit"
              >
                {% render 'icon-magic-wand' %}
                {{ section.settings.button_text | escape }}
              </button>
            </div>
          </div>

          <label for="preventAutoExtend" class="checkbox">
            <input
              type="checkbox"
              name="preventAutoExtend"
              id="preventAutoExtend"
            >

            <svg width="1.6rem" height="1.6rem" viewBox="0 0 16 16" aria-hidden="true" focusable="false">
              <rect width="16" height="16" stroke="currentColor" fill="none" stroke-width="1"></rect>
            </svg>

            <svg
              class="icon icon-checkmark"
              width="1.1rem"
              height="0.7rem"
              viewBox="0 0 11 7"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M1.5 3.5L2.83333 4.75L4.16667 6L9.5 1"
                stroke="currentColor"
                stroke-width="1.75"
                stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>

            <span>Do not auto-extend prompt</span>
          </label>

          {% comment %}
            <fieldset>
              <label class="product_type_label dropdown-toggle">
                <span class="dropdown-label"></span>
                {% render 'icon-caret' %}
              </label>
              <radiogroup class="product_type_filter dropdown-items" data-target=".product_type_label">
                <label class="product_type" data-val="UCTS">
                  <input type="radio" name="productType" value="UCTS" checked>
                  <span>Unisex T-shirt</span>
                </label>
                <label class="product_type" data-val="FCTS">
                  <input type="radio" name="productType" value="FCTS">
                  <span>Women Tee</span>
                </label>
                <label class="product_type" data-val="KCTS">
                  <input type="radio" name="productType" value="KCTS">
                  <span>Kids Tee</span>
                </label>
                <label class="product_type" data-val="HOOD">
                  <input type="radio" name="productType" value="HOOD">
                  <span>Hoodie</span>
                </label>
                <label class="product_type" data-val="UHCS">
                  <input type="radio" name="productType" value="UHCS">
                  <span>Sweatshirt</span>
                </label>
                <label class="product_type" data-val="CASE">
                  <input type="radio" name="productType" value="CASE">
                  <span>Smartphone Case</span>
                </label>
              </radiogroup>
            </fieldset>
          {% endcomment %}
        </form>
      </div>
    </div>

    <section class="search__wrapper loading">
      <div class="search__header">
        {% if section.settings.search_title != blank %}
          <h2>{{ section.settings.search_title }}</h2>
        {% endif %}
        {% if section.settings.search_description != blank %}
          <p class="js-search-prompt">{{ section.settings.search_description }}</p>
        {% endif %}
      </div>
      {% assign tshirt_photo = section.settings.tshirtplaceholder %}
      <div
        class="js-search-products products-list"
        data-mockup-src="{{ tshirt_photo }}"
      >
        <div class="products-wrapper">
          {% for i in (1..3) %}
            <div class="products-item">
              <div class="preview-image"></div>
              <img src="{{ tshirt_photo }}">
              <button class="btn btn--secondary js-get-product-redirect button button--secondary">
                <span>$34.99 Buy Now!</span>
              </button>
            </div>
          {% endfor %}
        </div>
      </div>
      <div class="products__append">
        <button type="button" class="append-2-slides js-generate-more">
          {% render 'create-more-icon' %}
          <span>Create more of this style</span>
        </button>
      </div>
    </section>

    {% comment %} COPY OF UPPER BLOCK BECAUSE OF SWIPER {% endcomment %}
    <template class="js-search-dom-template">
      <section class="search__wrapper">
        <div class="search__header">
          {% if section.settings.search_title != blank %}
            <h2>{{ section.settings.search_title }}</h2>
          {% endif %}
          {% if section.settings.search_description != blank %}
            <p class="js-search-prompt">{{ section.settings.search_description }}</p>
          {% endif %}
        </div>
        {% assign tshirt_photo = section.settings.tshirtplaceholder %}

        <div
          class="js-search-products products-list"
          data-mockup-src="{{ tshirt_photo }}"
        >
          <div class="products-wrapper">
            {% for i in (1..3) %}
              <div class="products-item">
                <div class="preview-image"></div>
                <img src="{{ tshirt_photo }}">
                <button class="btn btn--secondary js-get-product-redirect button button--secondary">
                  <span>$34.99 Buy Now!</span>
                </button>
              </div>
            {% endfor %}
          </div>
        </div>
        <div class="products__append">
          <button type="button" class="append-2-slides js-generate-more">
            {% render 'create-more-icon' %}
            <span>Create more of this style</span>
          </button>
        </div>
      </section>
    </template>

    {% comment %} @todo: add functionaity! {% endcomment %}
    {% if section.settings.show_more %}
      <div class="show-more js-show-more">
        <button class="show-more__btn btn btn--secondary js-get-new-prompt">
          {% render 'icon-magic-dark' %}
          <span>{{ section.settings.button_more }}</span>
        </button>
      </div>
    {% endif %}
  </div>
</div>
{%- render 'popup',
  popup_message: 'Your request is too suggestive. Please try something else.',
  popup_id: 'error_message'
-%}

{%- style -%}
  .template-search .search__wrapper .products-item:not(.customized) .preview-image {
    background-image: url({{ settings.loader }});
  }
{%- endstyle -%}

{% schema %}
{
  "name": "Search grid",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "video",
      "id": "preloader",
      "label": "Video preloader"
    },
    {
      "type": "text",
      "id": "tutorial_title",
      "label": "Tutorial title"
    },
    {
      "type": "text",
      "id": "tutorial_first_word",
      "label": "Tutorial first word"
    },
    {
      "type": "url",
      "id": "tutorial_url",
      "label": "Tutorial link url"
    },
    {
      "type": "text",
      "id": "form_placeholder",
      "default": "Panda jumping",
      "label": "Form placeholder"
    },
    {
      "type": "text",
      "id": "tshirtplaceholder",
      "default": "https://cdn.shopify.com/s/files/1/0694/9752/0433/files/t-shirt-mockup.png?v=1675951639",
      "label": "URL Link to T-Shirt product placeholder"
    },
    {
      "type": "text",
      "id": "button_text",
      "default": "Create",
      "label": "Button text"
    },
    {
      "type": "text",
      "id": "search_title",
      "default": "Brought you by  the prompt:",
      "label": "Search title"
    },
    {
      "type": "text",
      "id": "search_description",
      "default": "Loading...",
      "label": "Search description"
    },
    {
      "type": "checkbox",
      "id": "show_more",
      "label": "Show more button",
      "default": false
    },
    {
      "type": "text",
      "id": "button_more",
      "label": "Button more text",
      "default": "Show me more"
    }
  ],
  "presets": [
    {
      "name": "Search grid"
    }
  ]
}
{% endschema %}
